import{c as Gt}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{r as a,cF as $t,cG as de,aC as Vt,j as c,C as ge,m as se,V as ze,Y as Wt,b as le,aP as lt,bL as ce,cH as Kt,B as ue,aF as Ze,cI as W,cJ as Bt,cK as Ht,cL as Lt,cM as Ut,cN as Yt,cO as Zt,H as Qt,cP as Xt,bc as Qe,cQ as Jt,I as qt,X as en,x as tn,T as nn}from"./index-DVDzS5zo.js";import{f as sn,C as rn}from"./index.esm-DYlfXC4f.js";import{u as ln,g as on,f as ot,c as an}from"./index-hgvacr-t.js";import{C as cn}from"./checkbox-VBH6vfOi.js";var un=Object.defineProperty,fe=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,Xe=(e,n,t)=>n in e?un(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,dn=(e,n)=>{for(var t in n)it.call(n,t)&&Xe(e,t,n[t]);if(fe)for(var t of fe(n))at.call(n,t)&&Xe(e,t,n[t]);return e},fn=(e,n)=>{var t={};for(var s in e)it.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&fe)for(var s of fe(e))n.indexOf(s)<0&&at.call(e,s)&&(t[s]=e[s]);return t};const ct=a.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=fn(t,["color"]);return a.createElement("svg",dn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{fill:s,d:"M8.5 2.528h-.778a.75.75 0 1 0 0 1.5h1.08a4 4 0 0 1-.302-1.5M10.695 6.07a4 4 0 0 1-1.21-.94.75.75 0 0 0-.29.592V6.75H1.5a.75.75 0 0 0 0 1.5h7.694v1.028a.75.75 0 0 0 1.5 0zM5.806 1.5a.75.75 0 1 0-1.5 0v1.028H1.5a.75.75 0 0 0 0 1.5h2.806v1.028a.75.75 0 0 0 1.5 0V1.5M12.611 6.75a.75.75 0 0 0 0 1.5h.889a.75.75 0 0 0 0-1.5zM6.972 11.722a.75.75 0 0 1 .75-.75H13.5a.75.75 0 1 1 0 1.5H7.722a.75.75 0 0 1-.75-.75M1.5 10.972a.75.75 0 0 0 0 1.5h2.806V13.5a.75.75 0 0 0 1.5 0V9.944a.75.75 0 1 0-1.5 0v1.028z"}),a.createElement("circle",{cx:12.5,cy:2.5,r:2.5,fill:"#60A5FA"}),a.createElement("circle",{cx:12.5,cy:2.5,r:2,stroke:s,strokeOpacity:.12})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});ct.displayName="AdjustmentsDone";var hn=Object.defineProperty,he=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,Je=(e,n,t)=>n in e?hn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,mn=(e,n)=>{for(var t in n)ut.call(n,t)&&Je(e,t,n[t]);if(he)for(var t of he(n))dt.call(n,t)&&Je(e,t,n[t]);return e},pn=(e,n)=>{var t={};for(var s in e)ut.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&he)for(var s of he(e))n.indexOf(s)<0&&dt.call(e,s)&&(t[s]=e[s]);return t};const ft=a.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=pn(t,["color"]);return a.createElement("svg",mn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),a.createElement("g",{stroke:s,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#a)"},a.createElement("path",{d:"M12.611 7.5h.889M1.5 7.5h8.444M7.722 3.278H13.5M1.5 3.278h3.556M7.722 11.722H13.5M1.5 11.722h3.556M9.944 5.722v3.556M5.056 1.5v3.556M5.056 9.944V13.5"})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});ft.displayName="Adjustments";var gn=Object.defineProperty,me=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,qe=(e,n,t)=>n in e?gn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,bn=(e,n)=>{for(var t in n)ht.call(n,t)&&qe(e,t,n[t]);if(me)for(var t of me(n))mt.call(n,t)&&qe(e,t,n[t]);return e},vn=(e,n)=>{var t={};for(var s in e)ht.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&me)for(var s of me(e))n.indexOf(s)<0&&mt.call(e,s)&&(t[s]=e[s]);return t};const pt=a.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=vn(t,["color"]);return a.createElement("svg",bn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),a.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.823-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.924 4.678a.11.11 0 0 0-.056.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.41c.414 0 .78.344.78.759 0 .414-.366.741-.78.741H2.117a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75M9.338 8.72a.75.75 0 0 1 1.06 0l1.623 1.622 1.622-1.622a.75.75 0 1 1 1.06 1.06l-1.621 1.623 1.622 1.622a.75.75 0 0 1-1.06 1.061l-1.623-1.623-1.623 1.623a.75.75 0 0 1-1.06-1.06l1.622-1.623L9.338 9.78a.75.75 0 0 1 0-1.06",clipRule:"evenodd"}),a.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});pt.displayName="TaxExclusive";var xn=Object.defineProperty,pe=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,et=(e,n,t)=>n in e?xn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,wn=(e,n)=>{for(var t in n)gt.call(n,t)&&et(e,t,n[t]);if(pe)for(var t of pe(n))bt.call(n,t)&&et(e,t,n[t]);return e},Cn=(e,n)=>{var t={};for(var s in e)gt.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&pe)for(var s of pe(e))n.indexOf(s)<0&&bt.call(e,s)&&(t[s]=e[s]);return t};const vt=a.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=Cn(t,["color"]);return a.createElement("svg",wn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),a.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.824-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.925 4.678a.11.11 0 0 0-.057.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.346c.414 0 .812.337.812.75 0 .415-.398.75-.812.75H2.118a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75m6.028 0a.75.75 0 0 1 .75.75v1.292a.75.75 0 0 1-1.5 0V8.146a.75.75 0 0 1 .75-.75m5.588.733a.75.75 0 0 1 .2 1.042l-3.215 4.736a.75.75 0 0 1-1.16.1l-1.522-1.579a.75.75 0 0 1 1.08-1.041l.88.913 2.695-3.971a.75.75 0 0 1 1.042-.2",clipRule:"evenodd"}),a.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});vt.displayName="TaxInclusive";var yn=function(e){var n=e.as,t=e.errors,s=e.name,r=e.message,l=e.render,i=function(m,w){if(m==null)return{};var p,g,b={},_=Object.keys(m);for(g=0;g<_.length;g++)w.indexOf(p=_[g])>=0||(b[p]=m[p]);return b}(e,["as","errors","name","message","render"]),o=$t(),u=de(t||o.formState.errors,s);if(!u)return null;var f=u.message,d=u.types,v=Object.assign({},i,{children:f||r});return a.isValidElement(n)?a.cloneElement(n,v):l?l({message:f||r,messages:d}):a.createElement(n||a.Fragment,v)};function ne(e,n,t){let s=t.initialDeps??[],r;return()=>{var l,i,o,u;let f;t.key&&((l=t.debug)!=null&&l.call(t))&&(f=Date.now());const d=e();if(!(d.length!==s.length||d.some((w,p)=>s[p]!==w)))return r;s=d;let m;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(m=Date.now()),r=n(...d),t.key&&((o=t.debug)!=null&&o.call(t))){const w=Math.round((Date.now()-f)*100)/100,p=Math.round((Date.now()-m)*100)/100,g=p/16,b=(_,x)=>{for(_=String(_);_.length<x;)_=" "+_;return _};console.info(`%c⏱ ${b(p,5)} /${b(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,r),r}}function ke(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const _n=(e,n)=>Math.abs(e-n)<1,jn=(e,n,t)=>{let s;return function(...r){e.clearTimeout(s),s=e.setTimeout(()=>n.apply(this,r),t)}},En=e=>e,Mn=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let r=n;r<=t;r++)s.push(r);return s},Sn=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;const r=i=>{const{width:o,height:u}=i;n({width:Math.round(o),height:Math.round(u)})};if(r(t.getBoundingClientRect()),!s.ResizeObserver)return()=>{};const l=new s.ResizeObserver(i=>{const o=i[0];if(o!=null&&o.borderBoxSize){const u=o.borderBoxSize[0];if(u){r({width:u.inlineSize,height:u.blockSize});return}}r(t.getBoundingClientRect())});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},tt={passive:!0},kn=typeof window>"u"?!0:"onscrollend"in window,In=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;let r=0;const l=e.options.useScrollendEvent&&kn?()=>{}:jn(s,()=>{n(r,!1)},e.options.isScrollingResetDelay),i=f=>()=>{const{horizontal:d,isRtl:v}=e.options;r=d?t.scrollLeft*(v&&-1||1):t.scrollTop,l(),n(r,f)},o=i(!0),u=i(!1);return u(),t.addEventListener("scroll",o,tt),t.addEventListener("scrollend",u,tt),()=>{t.removeEventListener("scroll",o),t.removeEventListener("scrollend",u)}},Dn=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const s=n.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},On=(e,{adjustments:n=0,behavior:t},s)=>{var r,l;const i=e+n;(l=(r=s.scrollElement)==null?void 0:r.scrollTo)==null||l.call(r,{[s.options.horizontal?"left":"top"]:i,behavior:t})};class zn{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(l=>{this._measureElement(l.target,l)})}));return{disconnect:()=>{var r;(r=s())==null||r.disconnect(),t=null},observe:r=>{var l;return(l=s())==null?void 0:l.observe(r,{box:"border-box"})},unobserve:r=>{var l;return(l=s())==null?void 0:l.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,r])=>{typeof r>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:En,rangeExtractor:Mn,onChange:()=>{},measureElement:Dn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...t}},this.notify=t=>{var s,r;(r=(s=this.options).onChange)==null||r.call(s,this,t)},this.maybeNotify=ne(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const r=new Map,l=new Map;for(let i=s-1;i>=0;i--){const o=t[i];if(r.has(o.lane))continue;const u=l.get(o.lane);if(u==null||o.end>u.end?l.set(o.lane,o):o.end<u.end&&r.set(o.lane,!0),r.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((i,o)=>i.end===o.end?i.index-o.index:i.end-o.end)[0]:void 0},this.getMeasurementOptions=ne(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,s,r,l,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:i}),{key:!1}),this.getMeasurements=ne(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const u=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const f=this.measurementsCache.slice(0,u);for(let d=u;d<t;d++){const v=l(d),m=this.options.lanes===1?f[d-1]:this.getFurthestMeasurement(f,d),w=m?m.end+this.options.gap:s+r,p=o.get(v),g=typeof p=="number"?p:this.options.estimateSize(d),b=w+g,_=m?m.lane:d%this.options.lanes;f[d]={index:d,start:w,size:g,end:b,key:v,lane:_}}return this.measurementsCache=f,f},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=ne(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,s,r)=>this.range=t.length>0&&s>0?Nn({measurements:t,outerSize:s,scrollOffset:r}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getIndexes=ne(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,s,r,l)=>s===null?[]:t({startIndex:s.startIndex,endIndex:s.endIndex,overscan:r,count:l}),{key:"getIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,r=t.getAttribute(s);return r?parseInt(r,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const r=this.indexFromElement(t),l=this.measurementsCache[r];if(!l)return;const i=l.key,o=this.elementsCache.get(i);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(r,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const r=this.measurementsCache[t];if(!r)return;const l=this.itemSizeCache.get(r.key)??r.size,i=s-l;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,i,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,r)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(r))});return}this._measureElement(t,void 0)},this.getVirtualItems=ne(()=>[this.getIndexes(),this.getMeasurements()],(t,s)=>{const r=[];for(let l=0,i=t.length;l<i;l++){const o=t[l],u=s[o];r.push(u)}return r},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return ke(s[xt(0,s.length-1,r=>ke(s[r]).start,t)])},this.getOffsetForAlignment=(t,s)=>{const r=this.getSize(),l=this.getScrollOffset();s==="auto"&&t>=l+r&&(s="end"),s==="end"&&(t-=r);const i=this.options.horizontal?"scrollWidth":"scrollHeight",u=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-r;return Math.max(Math.min(u,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=this.measurementsCache[t];if(!r)return;const l=this.getSize(),i=this.getScrollOffset();if(s==="auto")if(r.end>=i+l-this.options.scrollPaddingEnd)s="end";else if(r.start<=i+this.options.scrollPaddingStart)s="start";else return[i,s];const o=r.start-this.options.scrollPaddingStart+(r.size-l)/2;switch(s){case"center":return[this.getOffsetForAlignment(o,s),s];case"end":return[this.getOffsetForAlignment(r.end+this.options.scrollPaddingEnd,s),s];default:return[this.getOffsetForAlignment(r.start-this.options.scrollPaddingStart,s),s]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:s="start",behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:s="auto",behavior:r}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const l=this.getOffsetForIndex(t,s);if(!l)return;const[i,o]=l;this._scrollToOffset(i,{adjustments:void 0,behavior:r}),r!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[f]=ke(this.getOffsetForIndex(t,o));_n(f,this.getScrollOffset())||this.scrollToIndex(t,{align:o,behavior:r})}else this.scrollToIndex(t,{align:o,behavior:r})}))},this.scrollBy=(t,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let r;return s.length===0?r=this.options.paddingStart:r=this.options.lanes===1?((t=s[s.length-1])==null?void 0:t.end)??0:Math.max(...s.slice(-this.options.lanes).map(l=>l.end)),Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const xt=(e,n,t,s)=>{for(;e<=n;){const r=(e+n)/2|0,l=t(r);if(l<s)e=r+1;else if(l>s)n=r-1;else return r}return e>0?e-1:0};function Nn({measurements:e,outerSize:n,scrollOffset:t}){const s=e.length-1,l=xt(0,s,o=>e[o].start,t);let i=l;for(;i<s&&e[i].end<t+n;)i++;return{startIndex:l,endIndex:i}}const nt=typeof document<"u"?a.useLayoutEffect:a.useEffect;function An(e){const n=a.useReducer(()=>({}),{})[1],t={...e,onChange:(r,l)=>{var i;l?Vt.flushSync(n):n(),(i=e.onChange)==null||i.call(e,r,l)}},[s]=a.useState(()=>new zn(t));return s.setOptions(t),nt(()=>s._didMount(),[]),nt(()=>s._willUpdate()),s}function st(e){return An({observeElementRect:Sn,observeElementOffset:In,scrollToFn:On,...e})}function Pn(e,n){typeof e=="function"?e(n):e&&"current"in e&&(e.current=n)}var be=(...e)=>n=>{e.forEach(t=>Pn(t,n))},wt=a.createContext(null),Ct=()=>{const e=a.useContext(wt);if(!e)throw new Error("useDataGridContext must be used within a DataGridContextProvider");return e};function yt(e){return`${e.row}:${e.col}`}function _t(e,n){return n?e.row===n.row&&e.col===n.col:!1}var Tn=[".",","];function jt(e){return Tn.includes(e.key)&&e.ctrlKey&&e.altKey}var Rn=/^.$/u,Fn=/^[0-9]$/u,ve=({context:e})=>{const{register:n,control:t,anchor:s,setIsEditing:r,setSingleRange:l,setIsSelecting:i,setRangeEnd:o,getWrapperFocusHandler:u,getWrapperMouseOverHandler:f,getInputChangeHandler:d,getIsCellSelected:v,getIsCellDragSelected:m,getCellMetadata:w}=Ct(),{rowIndex:p,columnIndex:g}=e,b=a.useMemo(()=>({row:p,col:g}),[p,g]),{id:_,field:x,type:k,innerAttributes:C,inputAttributes:E}=a.useMemo(()=>w(b),[b,w]),[A,G]=a.useState(!0),R=a.useRef(null),O=a.useRef(null),Z=a.useCallback(j=>{if(j.preventDefault(),j.stopPropagation(),j.detail===2&&O.current){G(!1),O.current.focus();return}if(j.shiftKey&&b.col===(s==null?void 0:s.col)){o(b);return}R.current&&(l(b),i(!0),R.current.focus())},[b,s,o,l,i]),Q=a.useCallback(j=>{var h;if(j.preventDefault(),j.stopPropagation(),j.detail===2){(h=O.current)==null||h.focus();return}if(j.shiftKey){o(b);return}R.current&&(l(b),i(!0),R.current.focus())},[i,l,o,b]),X=a.useCallback(()=>{G(!0),r(!1)},[r]),J=a.useCallback(()=>{G(!1),r(!0)},[r]),H=a.useCallback(j=>k==="number"?Fn.test(j):k==="text"?Rn.test(j):!1,[k]),U=a.useCallback(j=>{var h;if(!(!O.current||!H(j.key)||!A)&&!(j.key.toLowerCase()==="z"&&(j.ctrlKey||j.metaKey))&&!(j.key.toLowerCase()==="c"&&(j.ctrlKey||j.metaKey))&&!(j.key.toLowerCase()==="v"&&(j.ctrlKey||j.metaKey))&&j.key!=="Enter"&&!jt(j.nativeEvent)){if(O.current.focus(),G(!1),O.current instanceof HTMLInputElement){O.current.value="";const y=(h=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:h.set;y==null||y.call(O.current,j.key);const S=new Event("input",{bubbles:!0});O.current.dispatchEvent(S)}j.stopPropagation(),j.preventDefault()}},[A,H]),F=a.useMemo(()=>s?_t(b,s):!1,[s,b]),q=a.useMemo(()=>k==="boolean",[k]);a.useEffect(()=>{var j,h;F&&!((j=R.current)!=null&&j.contains(document.activeElement))&&((h=R.current)==null||h.focus())},[F]);const K={container:{field:x,isAnchor:F,isSelected:v(b),isDragSelected:m(b),showOverlay:q?!1:A,innerProps:{ref:R,onMouseOver:f(b),onMouseDown:k==="boolean"?Q:void 0,onKeyDown:U,onFocus:u(b),...C},overlayProps:{onMouseDown:Z}},input:{ref:O,onBlur:X,onFocus:J,onChange:d(x),...E}};return{id:_,field:x,register:n,control:t,renderProps:K}},oe=({context:e})=>{const{errors:n,getCellErrorMetadata:t,navigateToField:s}=Ct(),{rowIndex:r,columnIndex:l}=e,{accessor:i,field:o}=a.useMemo(()=>t({row:r,col:l}),[r,l,t]),u=i&&l===0?de(n,i):void 0,f=[];function d(m,w){if(m)if(Gn(m)){const p=m.message,g=()=>s(w);p&&f.push({message:p,to:g})}else Object.keys(m).forEach(p=>{const g=m[p],b=`${w}.${p}`;g&&typeof g=="object"&&d(g,b)})}u&&i&&d(u,i);const v=o?de(n,o):void 0;return{errors:n,rowErrors:f,cellError:v}};function Gn(e){return typeof e=="object"&&"message"in e&&"type"in e}var re=class{constructor({fields:e,prev:n,next:t,setter:s}){W(this,"_fields"),W(this,"_prev"),W(this,"_next"),W(this,"_setter"),this._fields=e,this._prev=n,this._next=t,this._setter=s}execute(){this._setter(this._fields,this._next)}undo(){this._setter(this._fields,this._prev)}redo(){this.execute()}},$n=class{constructor(e,n){W(this,"cells"),W(this,"rowAccessors",[]),W(this,"columnAccessors",[]),this.cells=this._populateCells(e,n),this.rowAccessors=this._computeRowAccessors(),this.columnAccessors=this._computeColumnAccessors()}_computeRowAccessors(){return this.cells.map((e,n)=>this.getRowAccessor(n))}_computeColumnAccessors(){return this.cells.length===0?[]:this.cells[0].map((e,n)=>this.getColumnAccessor(n))}getFirstNavigableCell(){for(let e=0;e<this.cells.length;e++)for(let n=0;n<this.cells[0].length;n++)if(this.cells[e][n]!==null)return{row:e,col:n};return null}getFieldsInRow(e){const n=[];return e<0||e>=this.cells.length||this.cells[e].forEach(t=>{t!==null&&n.push(t.field)}),n}getFieldsInSelection(e,n){var i;const t=[];if(!e||!n)return t;if(e.col!==n.col)throw new Error("Selection must be in the same column");const s=Math.min(e.row,n.row),r=Math.max(e.row,n.row),l=e.col;for(let o=s;o<=r;o++)this._isValidPosition(o,l)&&this.cells[o][l]!==null&&t.push((i=this.cells[o][l])==null?void 0:i.field);return t}getCellField(e){var n;return this._isValidPosition(e.row,e.col)&&((n=this.cells[e.row][e.col])==null?void 0:n.field)||null}getCellType(e){var n;return this._isValidPosition(e.row,e.col)&&((n=this.cells[e.row][e.col])==null?void 0:n.type)||null}getIsCellSelected(e,n,t){if(!e||!n||!t)return!1;if(n.col!==t.col)throw new Error("Selection must be in the same column");const s=Math.min(n.row,t.row),r=Math.max(n.row,t.row),l=n.col;return e.col===l&&e.row>=s&&e.row<=r}toggleColumn(e,n){e<0||e>=this.cells[0].length||this.cells.forEach((t,s)=>{const r=t[e];r&&(this.cells[s][e]={...r,enabled:n})})}toggleRow(e,n){e<0||e>=this.cells.length||this.cells[e].forEach((t,s)=>{t&&(this.cells[e][s]={...t,enabled:n})})}getCoordinatesByField(e){if(this.rowAccessors.length===1){const n=this.columnAccessors.indexOf(e);return n===-1?null:{row:0,col:n}}for(let n=0;n<this.rowAccessors.length;n++){const t=this.rowAccessors[n];if(t!==null&&e.startsWith(t))for(let s=0;s<this.columnAccessors.length;s++){const r=this.columnAccessors[s];if(r===null)continue;if(`${t}.${r}`===e)return{row:n,col:s}}}return null}getRowAccessor(e){if(e<0||e>=this.cells.length)return null;const t=this.cells[e].filter(l=>l!==null).map(l=>l.field.split("."));if(t.length===0)return null;let s=t[0];for(const l of t)if(s=s.filter((i,o)=>l[o]===i),s.length===0)break;const r=s.join(".");return r||null}getColumnAccessor(e){if(e<0||e>=this.cells[0].length)return null;const n=this.cells.map((r,l)=>{const i=r[e];if(!i)return null;const o=this.getRowAccessor(l);return o&&i.field.startsWith(o+".")?i.field.slice(o.length+1):null}).filter(r=>r!==null);if(n.length===0)return null;const t=n[0];return n.every(r=>r===t)?t:null}getValidMovement(e,n,t,s=!1){var i;const[r,l]=this._getDirectionDeltas(t);if(s)return this._getLastValidCellInDirection(e,n,r,l);{let o=e+r,u=n+l;for(;this._isValidPosition(o,u);){if(this.cells[o][u]!==null&&((i=this.cells[o][u])==null?void 0:i.enabled)!==!1)return{row:o,col:u};o+=r,u+=l}return{row:e,col:n}}}_isValidPosition(e,n,t){return t||(t=this.cells),e>=0&&e<t.length&&n>=0&&n<t[0].length}_getDirectionDeltas(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];case"ArrowRight":return[0,1];default:return[0,0]}}_getLastValidCellInDirection(e,n,t,s){let r=e,l=n,i=e,o=n;for(;this._isValidPosition(r+t,l+s);)r+=t,l+=s,this.cells[r][l]!==null&&(i=r,o=l);return{row:i,col:o}}_populateCells(e,n){const t=Array.from({length:e.length},()=>Array(n.length).fill(null));return e.forEach((s,r)=>{n.forEach((l,i)=>{if(!this._isValidPosition(r,i,t))return;const{name:o,field:u,type:f,...d}=l.meta,v={row:s,column:{...l,meta:d}},m=u?u(v):null;!m||!f||(t[r][i]={field:m,type:f,enabled:!0})})}),t}},Vn=class{constructor(e){W(this,"container"),this.container=e}getInput(e){var s;const n=this._getCellId(e),t=(s=this.container)==null?void 0:s.querySelector(`[data-cell-id="${n}"]`);return t||null}getInputByField(e){var t;const n=(t=this.container)==null?void 0:t.querySelector(`[data-field="${e}"]`);return n||null}getCoordinatesByField(e){var l;const n=(l=this.container)==null?void 0:l.querySelector(`[data-field="${e}"][data-cell-id]`);if(!n)return null;const t=n.getAttribute("data-cell-id");if(!t)return null;const[s,r]=t.split(":").map(i=>parseInt(i,10));return isNaN(s)||isNaN(r)?null:{row:s,col:r}}getContainer(e){var s;const n=this._getCellId(e),t=(s=this.container)==null?void 0:s.querySelector(`[data-container-id="${n}"]`);return t||null}_getCellId(e){return yt(e)}},Ie=class{constructor({prev:e,next:n,setter:t}){W(this,"_prev"),W(this,"_next"),W(this,"_setter"),this._prev=e,this._next=n,this._setter=t}execute(){this._setter(this._next)}undo(){this._setter(this._prev)}redo(){this.execute()}},Wn=({matrix:e,anchor:n,rangeEnd:t,setRangeEnd:s,isDragging:r,setIsDragging:l,isSelecting:i,setIsSelecting:o,setSingleRange:u,dragEnd:f,setDragEnd:d,setValue:v,execute:m})=>{const w=a.useCallback(C=>E=>{u(C)},[u]),p=a.useCallback(C=>E=>{if(E.stopPropagation(),E.preventDefault(),E.shiftKey){s(C);return}o(!0),u(C)},[o,s,u]),g=a.useCallback(C=>{if(!(!r&&!i))return E=>{(n==null?void 0:n.col)===C.col&&(i?s(C):d(C))}},[n==null?void 0:n.col,r,i,d,s]),b=a.useCallback(C=>(E,A)=>{const G=new Ie({next:E,prev:A,setter:R=>{v(C,R,{shouldDirty:!0,shouldTouch:!0})}});m(G)},[v,m]),_=a.useCallback(C=>{l(!0)},[l]),x=a.useCallback(C=>!C||!n||!t?!1:e.getIsCellSelected(C,n,t),[n,t,e]),k=a.useCallback(C=>!C||!n||!f?!1:e.getIsCellSelected(C,n,f),[n,f,e]);return{getWrapperFocusHandler:w,getOverlayMouseDownHandler:p,getWrapperMouseOverHandler:g,getInputChangeHandler:b,getIsCellSelected:x,getIsCellDragSelected:k,onDragToFillStart:_}},Kn=({matrix:e})=>{const n=a.useCallback(s=>{const{row:r,col:l}=s,i=yt(s),o=e.getCellField(s),u=e.getCellType(s);if(!o||!u)throw new Error(`'field' or 'type' is null for cell ${i}`);return{id:i,field:o,type:u,inputAttributes:{"data-row":r,"data-col":l,"data-cell-id":i,"data-field":o},innerAttributes:{"data-container-id":i}}},[e]),t=a.useCallback(s=>{const r=e.getRowAccessor(s.row),l=e.getCellField(s);return{accessor:r,field:l}},[e]);return{getCellMetadata:n,getCellErrorMetadata:t}},Bn=({matrix:e,form:n})=>{const[t,s]=a.useState(null),{getValues:r,setValue:l}=n,i=a.useCallback(u=>{if(!u)return null;const f=e.getCellField(u);if(!f)return null;const d=r(f);s({field:f,value:d})},[r,e]),o=a.useCallback(()=>{if(!t)return;const{field:u,value:f}=t;requestAnimationFrame(()=>{l(u,f)})},[l,t]);return{createSnapshot:i,restoreSnapshot:o}},Hn=({matrix:e,anchor:n,rangeEnd:t,isEditing:s,getSelectionValues:r,setSelectionValues:l,execute:i})=>{const o=a.useCallback(f=>{var w;if(s||!n||!t)return;f.preventDefault();const d=e.getFieldsInSelection(n,t),m=r(d).map(p=>`${p}`??"").join("	");(w=f.clipboardData)==null||w.setData("text/plain",m)},[s,n,t,e,r]),u=a.useCallback(f=>{var g;if(s||!n||!t)return;f.preventDefault();const d=(g=f.clipboardData)==null?void 0:g.getData("text/plain");if(!d)return;const v=d.split("	"),m=e.getFieldsInSelection(n,t),w=r(m),p=new re({fields:m,next:v,prev:w,setter:l});i(p)},[s,n,t,e,r,l,i]);return{handleCopyEvent:o,handlePasteEvent:u}};function Ln(e,n){const t=e.getAllLeafColumns(),s=t.map(u=>({id:u.id,name:Un(u),checked:u.getIsVisible(),disabled:!u.getCanHide()})),r=a.useCallback(u=>f=>{const d=t[u];d.getCanHide()&&(n.toggleColumn(u,f),d.toggleVisibility(f))},[t,n]),l=a.useCallback(()=>{e.setColumnVisibility({})},[e]),o=s.filter(u=>!u.disabled).length===0;return{columnOptions:s,handleToggleColumn:r,handleResetColumns:l,isDisabled:o}}function Un(e){const n=e.columnDef.id,t=e.columnDef.enableHiding,s=e==null?void 0:e.columnDef.meta;if(!n)throw new Error("Column is missing an id, which is a required field. Please provide an id for the column.");return!(s!=null&&s.name)&&t&&console.warn(`Column "${n}" does not have a name. You should add a name to the column definition. Falling back to the column id.`),(s==null?void 0:s.name)||n}var Yn=(e,n,t)=>{const[s,r]=a.useState(!1),[l,i]=a.useState(null),{flatRows:o}=n.getRowModel(),u=n.getAllFlatColumns(),f=Et(t),d=f.length,{rowsWithErrors:v,columnsWithErrors:m}=a.useMemo(()=>{const p=new Set,g=new Set;return f.forEach(b=>{const _=e.rowAccessors.findIndex(k=>k&&(b===k||b.startsWith(`${k}.`)));_!==-1&&p.add(_);const x=e.columnAccessors.findIndex(k=>k&&(b===k||b.endsWith(`.${k}`)));x!==-1&&g.add(x)}),{rowsWithErrors:p,columnsWithErrors:g}},[f,e.rowAccessors,e.columnAccessors]),w=a.useCallback((p,g,b,_)=>{if(s)l&&(b(l.rows),_(l.columns));else{i({rows:{...p},columns:{...g}});const x=o.map((C,E)=>v.has(E)?void 0:E).filter(C=>C!==void 0),k=u.map((C,E)=>!m.has(E)&&E!==0?C.id:void 0).filter(C=>C!==void 0);b(x.reduce((C,E)=>({...C,[E]:!1}),{})),_(k.reduce((C,E)=>({...C,[E]:!1}),{}))}r(x=>!x)},[s,l,o,u,v,m]);return{errorCount:d,isHighlighted:s,toggleErrorHighlighting:w}};function Et(e,n=[]){return typeof e!="object"||e===null?[]:"message"in e&&"type"in e?[n.join(".")]:Object.entries(e).flatMap(([t,s])=>Et(s,[...n,t]))}var Zn=({matrix:e,form:n,anchor:t})=>{const{getValues:s,setValue:r}=n,l=a.useCallback(o=>o.length?o.map(u=>s(u)):[],[s]),i=a.useCallback(async(o,u)=>{if(!o.length||!t)return;const f=e.getCellType(t);if(!f)return;const d=qn(u,f);o.forEach((v,m)=>{if(!v)return;const w=m%u.length,p=d[w];r(v,p,{shouldDirty:!0,shouldTouch:!0})})},[e,t,r]);return{getSelectionValues:l,setSelectionValues:i}};function Qn(e){if(typeof e=="number")return e;const n=Number(e);if(isNaN(n))throw new Error(`String "${e}" cannot be converted to number.`);return n}function Xn(e){if(typeof e=="boolean")return e;if(typeof e>"u"||e===null)return!1;const n=e.toLowerCase();if(n==="true"||n==="false")return n==="true";throw new Error(`String "${e}" cannot be converted to boolean.`)}function Jn(e){return typeof e>"u"||e===null?"":String(e)}function qn(e,n){switch(n){case"number":return e.map(t=>t===""?t:Qn(t));case"boolean":return e.map(Xn);case"text":return e.map(Jn);default:throw new Error(`Unsupported target type "${n}".`)}}var es=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ts=["ArrowUp","ArrowDown"],ns=({containerRef:e,matrix:n,anchor:t,rangeEnd:s,isEditing:r,setTrapActive:l,scrollToCoordinates:i,setSingleRange:o,setRangeEnd:u,onEditingChangeHandler:f,getValues:d,setValue:v,execute:m,undo:w,redo:p,queryTool:g,getSelectionValues:b,setSelectionValues:_,restoreSnapshot:x})=>{const k=a.useCallback(h=>{if(!t)return;const y=n.getCellType(t);if(r&&y!=="boolean")return;const S=ts.includes(h.key)?"vertical":"horizontal",I=S==="horizontal"?t:h.shiftKey?s:t,D=S==="horizontal"?o:h.shiftKey?u:o;if(!I)return;const{row:z,col:P}=I,Y=T=>{h.preventDefault(),h.stopPropagation(),i(T,S),D(T)},ee=n.getValidMovement(z,P,h.key,h.metaKey||h.ctrlKey);Y(ee)},[r,t,s,i,o,u,n]),C=a.useCallback(h=>{if(!t)return;h.preventDefault(),h.stopPropagation();const{row:y,col:S}=t,I=h.shiftKey?"ArrowLeft":"ArrowRight",D="horizontal",z=n.getValidMovement(y,S,I,h.metaKey||h.ctrlKey);i(z,D),o(z)},[t,i,o,n]),E=a.useCallback(h=>{if(h.preventDefault(),h.shiftKey){p();return}w()},[p,w]),A=a.useCallback(h=>{const y=s??h,S=n.getFieldsInSelection(h,y),I=b(S),D=I.every(Y=>Y===!0),z=Array.from({length:I.length},()=>!D),P=new re({fields:S,next:z,prev:I,setter:_});m(P)},[s,n,b,_,m]),G=a.useCallback(h=>{const y=n.getCellField(h),S=g==null?void 0:g.getInput(h);if(!y||!S)return;const I=d(y),D="",z=new Ie({next:D,prev:I,setter:P=>{v(y,P,{shouldDirty:!0,shouldTouch:!0})}});m(z),S.focus()},[n,g,d,m,v]),R=a.useCallback(h=>{if(!t||r)return;h.preventDefault();const y=n.getCellType(t);if(y)switch(y){case"boolean":A(t);break;case"number":case"text":G(t);break}},[t,r,n,A,G]),O=a.useCallback((h,y)=>{const S=h.shiftKey?"ArrowUp":"ArrowDown",I=n.getValidMovement(y.row,y.col,S,!1);if(y.row!==I.row||y.col!==I.col)o(I),i(I,"vertical");else{const D=g==null?void 0:g.getContainer(y);D==null||D.focus()}f(!1)},[g,n,i,o,f]),Z=a.useCallback(h=>{const y=g==null?void 0:g.getInput(h);y&&(y.focus(),f(!0))},[g,f]),Q=a.useCallback((h,y)=>{if(r){O(h,y);return}Z(y)},[O,Z,r]),X=a.useCallback((h,y)=>{const S=n.getCellField(y);if(!S)return;const I=d(S);let D;typeof I=="boolean"?D=!I:D=!0;const z=new Ie({next:D,prev:I,setter:P=>{v(S,P,{shouldDirty:!0,shouldTouch:!0})}});m(z),O(h,y)},[m,d,O,n,v]),J=a.useCallback(h=>{if(!t)return;switch(h.preventDefault(),n.getCellType(t)){case"text":case"number":Q(h,t);break;case"boolean":{X(h,t);break}}},[t,n,Q,X]),H=a.useCallback((h,y)=>{const S=n.getFieldsInSelection(h,y),I=b(S),D=Array.from({length:I.length},()=>""),z=new re({fields:S,next:D,prev:I,setter:_});m(z)},[n,b,_,m]),U=a.useCallback((h,y)=>{const S=n.getFieldsInSelection(h,y),I=b(S),D=Array.from({length:I.length},()=>!1),z=new re({fields:S,next:D,prev:I,setter:_});m(z)},[m,b,n,_]),F=a.useCallback(h=>{if(!t||!s||r)return;h.preventDefault();const y=n.getCellType(t);if(y)switch(y){case"text":case"number":H(t,s);break;case"boolean":U(t,s);break}},[t,s,r,n,H,U]),q=a.useCallback(h=>{if(!t||!r)return;h.preventDefault(),h.stopPropagation(),x();const y=g==null?void 0:g.getContainer(t);y==null||y.focus()},[g,r,t,x]),K=a.useCallback(h=>{if(!e||r)return;const y=ss(e),S=I=>{I&&(l(!1),I.focus())};switch(h.key){case".":S(y.cancel);break;case",":S(y.shortcuts);break}},[t,r,l,e]);return{handleKeyDownEvent:a.useCallback(h=>{if(es.includes(h.key)){k(h);return}if(h.key==="z"&&(h.metaKey||h.ctrlKey)){E(h);return}if(h.key===" "){R(h);return}if(h.key==="Delete"||h.key==="Backspace"){F(h);return}if(h.key==="Enter"){J(h);return}if(h.key==="Escape"){q(h);return}if(h.key==="Tab"){C(h);return}},[q,k,E,R,J,F,C]),handleSpecialFocusKeys:K}};function ss(e){const n=Array.from(document.querySelectorAll("[tabindex], a, button, input, select, textarea")),t=n.indexOf(e.current),s=t>0?n[t-1]:null;let r=null;for(let l=t+1;l<n.length;l++)if(!e.current.contains(n[l])){r=n[l];break}return{shortcuts:s,cancel:r}}var rs=({matrix:e,anchor:n,dragEnd:t,setDragEnd:s,isDragging:r,setIsDragging:l,setRangeEnd:i,setIsSelecting:o,getSelectionValues:u,setSelectionValues:f,execute:d})=>{const v=a.useCallback(()=>{if(!r||!n||!t)return;const w=e.getFieldsInSelection(n,t),p=e.getCellField(n);if(!p||!w.length)return;const g=u([p]),b=w.filter(C=>C!==p),_=u(b),x=Array.from({length:_.length},()=>g[0]),k=new re({fields:b,prev:_,next:x,setter:f});d(k),l(!1),s(null),i(t)},[r,n,t,e,u,f,d,l,s,i]);return{handleMouseUpEvent:a.useCallback(()=>{v(),o(!1)},[v,o])}},ls=({matrix:e,anchor:n,visibleColumns:t,visibleRows:s,columnVirtualizer:r,rowVirtualizer:l,setColumnVisibility:i,flatColumns:o,queryTool:u,setSingleRange:f})=>{const d=a.useCallback((m,w)=>{if(!n)return;const{row:p,col:g}=m,{row:b,col:_}=n,x=p>=b?"down":"up",k=g>=_?"right":"left";let C=x==="down"?p+1:p-1;s[C]===void 0&&(C=p);let E=k==="right"?g+1:g-1;t[E]===void 0&&(E=g);const A={align:"auto",behavior:"auto"};(w==="horizontal"||w==="both")&&r.scrollToIndex(E,A),(w==="vertical"||w==="both")&&l.scrollToIndex(C,A)},[n,r,s,l,t]),v=a.useCallback(m=>{const w=e.getCoordinatesByField(m);if(!w)return;const p=o[w.col];i(g=>({...g,[p.id]:!0})),requestAnimationFrame(()=>{d(w,"both"),f(w)}),requestAnimationFrame(()=>{const g=u==null?void 0:u.getInput(w);g&&g.focus()})},[e,o,i,d,f,u]);return{scrollToCoordinates:d,navigateToField:v}},os=e=>{const n=a.useRef(null);return a.useEffect(()=>{e.current&&(n.current=new Vn(e.current))},[e]),n.current},Mt=({rowErrors:e})=>{const n=e?e.length:0;return!e||n<=0?null:c.jsx(ze,{content:c.jsx("ul",{className:"flex flex-col gap-y-3",children:e.map((t,s)=>c.jsx(is,{error:t},s))}),delayDuration:0,children:c.jsx(Wt,{color:"red",size:"2xsmall",className:"cursor-default",children:n})})},is=({error:e})=>{const{t:n}=le();return c.jsxs("li",{className:"txt-compact-small flex flex-col items-start",children:[e.message,c.jsx("button",{type:"button",onClick:e.to,className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg",children:n("dataGrid.errors.fixError")})]})},xe=({isAnchor:e,isSelected:n,isDragSelected:t,field:s,showOverlay:r,placeholder:l,innerProps:i,overlayProps:o,children:u,errors:f,rowErrors:d,outerComponent:v})=>{const w=!!de(f,s);return c.jsxs("div",{className:"group/container relative size-full",children:[c.jsxs("div",{className:se("bg-ui-bg-base group/cell relative flex size-full items-center gap-x-2 px-4 py-2.5 outline-none",{"bg-ui-tag-red-bg text-ui-tag-red-text":w&&!e&&!n&&!t,"ring-ui-bg-interactive ring-2 ring-inset":e,"bg-ui-bg-highlight [&:has([data-field]:focus)]:bg-ui-bg-base":n||e,"bg-ui-bg-subtle":t&&!e}),tabIndex:-1,...i,children:[c.jsx(yn,{name:s,errors:f,render:({message:p})=>c.jsx("div",{className:"flex items-center justify-center",children:c.jsx(ze,{content:p,delayDuration:0,children:c.jsx(lt,{className:"text-ui-tag-red-icon z-[3]"})})})}),c.jsx("div",{className:"relative z-[1] flex size-full items-center justify-center",children:c.jsx(as,{isAnchor:e,placeholder:l,children:u})}),c.jsx(Mt,{rowErrors:d}),r&&c.jsx("div",{...o,"data-cell-overlay":"true",className:"absolute inset-0"})]}),v]})},as=({isAnchor:e,placeholder:n,children:t})=>!e&&n?n:t,cs=({context:e,disabled:n})=>{const{field:t,control:s,renderProps:r}=ve({context:e}),l=oe({context:e}),{container:i,input:o}=r;return c.jsx(ge,{control:s,name:t,render:({field:u})=>c.jsx(xe,{...i,...l,children:c.jsx(us,{field:u,inputProps:o,disabled:n})})})},us=({field:e,inputProps:n,disabled:t})=>{const{ref:s,value:r,onBlur:l,name:i,disabled:o}=e,{ref:u,onBlur:f,onChange:d,onFocus:v,...m}=n,w=be(s,u);return c.jsx(cn,{disabled:t||o,name:i,checked:r,onCheckedChange:p=>d(p===!0,r),onFocus:v,onBlur:()=>{l(),f()},ref:w,tabIndex:-1,...m})},De=({context:e,code:n})=>{const{field:t,control:s,renderProps:r}=ve({context:e}),l=oe({context:e}),{container:i,input:o}=r,u=Gt[n.toUpperCase()];return c.jsx(ge,{control:s,name:t,render:({field:f})=>c.jsx(xe,{...i,...l,children:c.jsx(ds,{field:f,inputProps:o,currencyInfo:u})})})},ds=({field:e,inputProps:n,currencyInfo:t})=>{const{value:s,onChange:r,onBlur:l,ref:i,...o}=e,{ref:u,onBlur:f,onFocus:d,onChange:v,...m}=n,w=a.useCallback(x=>{const k=typeof x=="number"?x.toString():x||"";return sn({value:k,decimalScale:t.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[t]),[p,g]=a.useState(s||""),b=(x,k,C)=>{if(!x){g("");return}g(x)};a.useEffect(()=>{let x=s;isNaN(Number(s))||(x=w(x)),g(x)},[s,w]);const _=be(u,i);return c.jsxs("div",{className:"relative flex size-full items-center",children:[c.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,children:t.symbol_native}),c.jsx(rn,{...o,...m,ref:_,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:p||void 0,onValueChange:b,formatValueOnBlur:!0,onBlur:()=>{l(),f(),v(p,s)},onFocus:d,decimalScale:t.decimal_digits,decimalsLimit:t.decimal_digits,autoComplete:"off",tabIndex:-1})]})},fs=({context:e,...n})=>{const{field:t,control:s,renderProps:r}=ve({context:e}),l=oe({context:e}),{container:i,input:o}=r;return c.jsx(ge,{control:s,name:t,render:({field:u})=>c.jsx(xe,{...i,...l,children:c.jsx(hs,{field:u,inputProps:o,...n})})})},hs=({field:e,inputProps:n,...t})=>{const{ref:s,value:r,onChange:l,onBlur:i,...o}=e,{ref:u,onChange:f,onBlur:d,onFocus:v,...m}=n,[w,p]=a.useState(r);a.useEffect(()=>{p(r)},[r]);const g=be(u,s);return c.jsx("div",{className:"size-full",children:c.jsx("input",{ref:g,value:w,onChange:b=>p(b.target.value),onBlur:()=>{i(),d(),f(w,r)},onFocus:v,type:"number",inputMode:"decimal",className:se("txt-compact-small size-full bg-transparent outline-none","placeholder:text-ui-fg-muted"),tabIndex:-1,...t,...o,...m})})},Oe=({context:e,children:n})=>{const{rowErrors:t}=oe({context:e});return c.jsxs("div",{className:"bg-ui-bg-subtle txt-compact-small text-ui-fg-subtle flex size-full cursor-not-allowed items-center justify-between overflow-hidden px-4 py-2.5 outline-none",children:[c.jsx("span",{className:"truncate",children:n}),c.jsx(Mt,{rowErrors:t})]})},ms=(e=20)=>{const[n,t]=a.useState([]),[s,r]=a.useState([]),l=n.length>0,i=s.length>0,o=a.useCallback(()=>{if(!l)return;const d=n[n.length-1],v=n.slice(0,n.length-1);d.undo(),t(v),r([d,...s.slice(0,e-1)])},[l,s,n,e]),u=a.useCallback(()=>{if(!i)return;const d=s[0],v=s.slice(1);d.redo(),t([...n,d].slice(0,e-1)),r(v)},[i,s,n,e]),f=a.useCallback(d=>{d.execute(),t(v=>[...v,d].slice(0,e-1)),r([])},[e]);return{undo:o,redo:u,execute:f,canUndo:l,canRedo:i}},ps=()=>{const{t:e}=le();return a.useMemo(()=>[{label:e("dataGrid.shortcuts.commands.undo"),keys:{Mac:["⌘","Z"],Windows:["Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.redo"),keys:{Mac:["⇧","⌘","Z"],Windows:["Shift","Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.copy"),keys:{Mac:["⌘","C"],Windows:["Ctrl","C"]}},{label:e("dataGrid.shortcuts.commands.paste"),keys:{Mac:["⌘","V"],Windows:["Ctrl","V"]}},{label:e("dataGrid.shortcuts.commands.edit"),keys:{Mac:["↵"],Windows:["Enter"]}},{label:e("dataGrid.shortcuts.commands.delete"),keys:{Mac:["⌫"],Windows:["Backspace"]}},{label:e("dataGrid.shortcuts.commands.clear"),keys:{Mac:["Space"],Windows:["Space"]}},{label:e("dataGrid.shortcuts.commands.moveUp"),keys:{Mac:["↑"],Windows:["↑"]}},{label:e("dataGrid.shortcuts.commands.moveDown"),keys:{Mac:["↓"],Windows:["↓"]}},{label:e("dataGrid.shortcuts.commands.moveLeft"),keys:{Mac:["←"],Windows:["←"]}},{label:e("dataGrid.shortcuts.commands.moveRight"),keys:{Mac:["→"],Windows:["→"]}},{label:e("dataGrid.shortcuts.commands.moveTop"),keys:{Mac:["⌘","↑"],Windows:["Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.moveBottom"),keys:{Mac:["⌘","↓"],Windows:["Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectDown"),keys:{Mac:["⇧","↓"],Windows:["Shift","↓"]}},{label:e("dataGrid.shortcuts.commands.selectUp"),keys:{Mac:["⇧","↑"],Windows:["Shift","↑"]}},{label:e("dataGrid.shortcuts.commands.selectColumnDown"),keys:{Mac:["⇧","⌘","↓"],Windows:["Shift","Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectColumnUp"),keys:{Mac:["⇧","⌘","↑"],Windows:["Shift","Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.focusToolbar"),keys:{Mac:["⌃","⌥",","],Windows:["Ctrl","Alt",","]}},{label:e("dataGrid.shortcuts.commands.focusCancel"),keys:{Mac:["⌃","⌥","."],Windows:["Ctrl","Alt","."]}}],[e])},gs=({open:e,onOpenChange:n})=>{const{t}=le(),[s,r]=a.useState(""),l=ps(),i=a.useMemo(()=>l.filter(o=>o.label.toLowerCase().includes(s.toLowerCase())),[s,l]);return c.jsxs(Bt,{open:e,onOpenChange:n,children:[c.jsx(Ht,{asChild:!0,children:c.jsx(ue,{size:"small",variant:"secondary",children:t("dataGrid.shortcuts.label")})}),c.jsxs(Lt,{children:[c.jsx(Ut,{className:se("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),c.jsxs(Yt,{className:"bg-ui-bg-subtle shadow-elevation-modal fixed left-[50%] top-[50%] flex h-full max-h-[612px] w-full max-w-[560px] translate-x-[-50%] translate-y-[-50%] flex-col divide-y overflow-hidden rounded-lg outline-none",children:[c.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(Zt,{asChild:!0,children:c.jsx(Qt,{children:t("app.menus.user.shortcuts")})}),c.jsx(Xt,{className:"sr-only"})]}),c.jsxs("div",{className:"flex items-center gap-x-2",children:[c.jsx(Qe,{children:"esc"}),c.jsx(Jt,{asChild:!0,children:c.jsx(qt,{variant:"transparent",size:"small",children:c.jsx(en,{})})})]})]}),c.jsx("div",{children:c.jsx(tn,{type:"search",value:s,autoFocus:!0,onChange:o=>r(o.target.value)})})]}),c.jsx("div",{className:"flex flex-col divide-y overflow-y-auto",children:i.map((o,u)=>{var f;return c.jsxs("div",{className:"text-ui-fg-subtle flex items-center justify-between px-6 py-3",children:[c.jsx(nn,{size:"small",children:o.label}),c.jsx("div",{className:"flex items-center gap-x-1",children:(f=o.keys.Mac)==null?void 0:f.map((d,v)=>c.jsx("div",{className:"flex items-center gap-x-1",children:c.jsx(Qe,{children:d})},v))})]},u)})})]})]})]})},bs=40,St=e=>{const n=e.getIsPinned(),s=document.documentElement.classList.contains("dark")?"rgb(50,50,53)":"rgb(228,228,231)";return{position:n?"sticky":"relative",width:e.getSize(),zIndex:n?1:0,borderBottom:n?`1px solid ${s}`:void 0,borderRight:n?`1px solid ${s}`:void 0,left:n==="left"?`${e.getStart("left")}px`:void 0,right:n==="right"?`${e.getAfter("right")}px`:void 0}},vs=({data:e=[],columns:n,state:t,getSubRows:s,onEditingChange:r,disableInteractions:l})=>{var Ue,Ye;const i=a.useRef(null),{redo:o,undo:u,execute:f}=ms(),{register:d,control:v,getValues:m,setValue:w,formState:{errors:p}}=t,[g,b]=a.useState(!0),_=!l&&g,[x,k]=a.useState(null),[C,E]=a.useState(null),[A,G]=a.useState(null),[R,O]=a.useState(!1),[Z,Q]=a.useState(!1),[X,J]=a.useState(!1),[H,U]=a.useState({}),[F,q]=a.useState({}),K=ln({data:e,columns:n,initialState:{columnPinning:{left:[n[0].id]}},state:{columnVisibility:H},onColumnVisibilityChange:U,getSubRows:s,getCoreRowModel:on(),defaultColumn:{size:200,maxSize:400}}),{flatRows:j}=K.getRowModel(),h=K.getAllFlatColumns(),y=a.useMemo(()=>j.filter((M,N)=>(F==null?void 0:F[N])!==!1),[j,F]),S=K.getVisibleLeafColumns(),I=st({count:y.length,estimateSize:()=>bs,getScrollElement:()=>i.current,overscan:5,rangeExtractor:M=>{const N=new Set(Array.from({length:M.endIndex-M.startIndex+1},($,V)=>M.startIndex+V));return x&&y[x.row]&&N.add(x.row),C&&y[C.row]&&N.add(C.row),Array.from(N).sort(($,V)=>$-V)}}),D=I.getVirtualItems(),z=st({count:S.length,estimateSize:M=>S[M].getSize(),getScrollElement:()=>i.current,horizontal:!0,overscan:3,rangeExtractor:M=>{const N=M.startIndex,$=M.endIndex,V=new Set(Array.from({length:$-N+1},(ie,B)=>N+B));return x&&S[x.col]&&V.add(x.col),C&&S[C.col]&&V.add(C.col),V.add(0),Array.from(V).sort((ie,B)=>ie-B)}}),P=z.getVirtualItems();let Y,ee;z&&(P!=null&&P.length)&&(Y=((Ue=P[0])==null?void 0:Ue.start)??0,ee=z.getTotalSize()-(((Ye=P[P.length-1])==null?void 0:Ye.end)??0));const T=a.useMemo(()=>new $n(j,n),[j,n]),te=os(i),L=a.useCallback(M=>{k(M),E(M)},[]),{errorCount:kt,isHighlighted:It,toggleErrorHighlighting:Ne}=Yn(T,K,p),Dt=a.useCallback(()=>{Ne(F,H,q,U)},[Ne,F,H]),{columnOptions:Ot,handleToggleColumn:Ae,handleResetColumns:zt,isDisabled:Nt}=Ln(K,T),At=a.useCallback(M=>Ae(M),[Ae]),{navigateToField:Pe,scrollToCoordinates:we}=ls({matrix:T,queryTool:te,anchor:x,columnVirtualizer:z,rowVirtualizer:I,flatColumns:h,setColumnVisibility:U,setSingleRange:L,visibleColumns:S,visibleRows:y}),{createSnapshot:Te,restoreSnapshot:Pt}=Bn({matrix:T,form:t}),Ce=a.useCallback(M=>{r&&r(M),M&&Te(x),J(M)},[x,Te,r]),{getSelectionValues:ye,setSelectionValues:_e}=Zn({matrix:T,form:t,anchor:x}),{handleKeyDownEvent:je,handleSpecialFocusKeys:Re}=ns({containerRef:i,matrix:T,queryTool:te,anchor:x,rangeEnd:C,isEditing:X,setTrapActive:b,setRangeEnd:E,getSelectionValues:ye,getValues:m,setSelectionValues:_e,onEditingChangeHandler:Ce,restoreSnapshot:Pt,setSingleRange:L,scrollToCoordinates:we,execute:f,undo:u,redo:o,setValue:w}),{handleMouseUpEvent:Ee}=rs({matrix:T,anchor:x,dragEnd:A,setDragEnd:G,isDragging:Z,setIsDragging:Q,setRangeEnd:E,setIsSelecting:O,getSelectionValues:ye,setSelectionValues:_e,execute:f}),{handleCopyEvent:Me,handlePasteEvent:Se}=Hn({matrix:T,isEditing:X,anchor:x,rangeEnd:C,getSelectionValues:ye,setSelectionValues:_e,execute:f}),{getWrapperFocusHandler:Fe,getInputChangeHandler:Ge,getOverlayMouseDownHandler:$e,getWrapperMouseOverHandler:Ve,getIsCellDragSelected:We,getIsCellSelected:Ke,onDragToFillStart:Tt}=Wn({matrix:T,anchor:x,rangeEnd:C,setRangeEnd:E,isDragging:Z,setIsDragging:Q,isSelecting:R,setIsSelecting:O,setSingleRange:L,dragEnd:A,setDragEnd:G,setValue:w,execute:f}),{getCellErrorMetadata:Be,getCellMetadata:He}=Kn({matrix:T});a.useEffect(()=>{if(_)return window.addEventListener("keydown",je),window.addEventListener("mouseup",Ee),window.addEventListener("copy",Me),window.addEventListener("paste",Se),()=>{window.removeEventListener("keydown",je),window.removeEventListener("mouseup",Ee),window.removeEventListener("copy",Me),window.removeEventListener("paste",Se)}},[_,je,Ee,Me,Se]),a.useEffect(()=>{const M=N=>{if(jt(N)){Re(N);return}};return window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)}},[Re]);const Rt=a.useCallback(M=>{M&&b(!1)},[]);a.useEffect(()=>{x&&(C||E(x))},[x,C]),a.useEffect(()=>{if(!x&&T){const M=T.getFirstNavigableCell();M&&L(M)}},[x,T,L]);const Ft=a.useMemo(()=>({anchor:x,control:v,trapActive:_,errors:p,setTrapActive:b,setIsSelecting:O,setIsEditing:Ce,setSingleRange:L,setRangeEnd:E,getWrapperFocusHandler:Fe,getInputChangeHandler:Ge,getOverlayMouseDownHandler:$e,getWrapperMouseOverHandler:Ve,register:d,getIsCellSelected:Ke,getIsCellDragSelected:We,getCellMetadata:He,getCellErrorMetadata:Be,navigateToField:Pe}),[x,v,_,p,b,O,Ce,L,E,Fe,Ge,$e,Ve,d,Ke,We,He,Be,Pe]),Le=a.useCallback(()=>{x&&!_&&(b(!0),L(x),we(x,"both"),requestAnimationFrame(()=>{var M;(M=te==null?void 0:te.getContainer(x))==null||M.focus()}))},[x,_,L,we,te]);return c.jsx(wt.Provider,{value:Ft,children:c.jsxs("div",{className:"bg-ui-bg-subtle flex size-full flex-col",children:[c.jsx(xs,{columnOptions:Ot,isDisabled:Nt,onToggleColumn:At,errorCount:kt,onToggleErrorHighlighting:Dt,onResetColumns:zt,isHighlighted:It,onHeaderInteractionChange:Rt}),c.jsx("div",{className:"size-full overflow-hidden",children:c.jsx("div",{ref:i,autoFocus:!0,tabIndex:0,className:"relative h-full select-none overflow-auto outline-none",onFocus:Le,onClick:Le,"data-container":!0,role:"application",children:c.jsxs("div",{role:"grid",className:"text-ui-fg-subtle grid",children:[c.jsx("div",{role:"rowgroup",className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:K.getHeaderGroups().map(M=>c.jsxs("div",{role:"row",className:"flex h-10 w-full",children:[Y?c.jsx("div",{role:"presentation",style:{display:"flex",width:Y}}):null,P.reduce((N,$,V,ie)=>{const B=M.headers[$.index],ae=ie[V-1];return ae&&$.index!==ae.index+1&&N.push(c.jsx("div",{role:"presentation",style:{display:"flex",width:`${$.start-ae.end}px`}},`padding-${ae.index}-${$.index}`)),N.push(c.jsx("div",{role:"columnheader","data-column-index":$.index,style:{width:B.getSize(),...St(B.column)},className:"bg-ui-bg-base txt-compact-small-plus flex items-center border-b border-r px-4 py-2.5",children:B.isPlaceholder?null:ot(B.column.columnDef.header,B.getContext())},B.id)),N},[]),ee?c.jsx("div",{role:"presentation",style:{display:"flex",width:ee}}):null]},M.id))}),c.jsx("div",{role:"rowgroup",className:"relative grid",style:{height:`${I.getTotalSize()}px`},children:D.map(M=>{const N=y[M.index],$=j.findIndex(V=>V.id===N.id);return c.jsx(Cs,{row:N,rowIndex:$,virtualRow:M,flatColumns:h,virtualColumns:P,anchor:x,virtualPaddingLeft:Y,virtualPaddingRight:ee,onDragToFillStart:Tt},N.id)})})]})})})]})})},xs=({columnOptions:e,isDisabled:n,onToggleColumn:t,onResetColumns:s,isHighlighted:r,errorCount:l,onToggleErrorHighlighting:i,onHeaderInteractionChange:o})=>{const[u,f]=a.useState(!1),[d,v]=a.useState(!1),{t:m}=le(),w=e.some(b=>!b.checked),p=b=>{o(b),f(b)},g=b=>{o(b),v(b)};return c.jsxs("div",{className:"bg-ui-bg-base flex items-center justify-between border-b p-4",children:[c.jsxs("div",{className:"flex items-center gap-x-2",children:[c.jsxs(ce,{open:d,onOpenChange:g,children:[c.jsx(Kt,{showTooltip:n,content:m("dataGrid.columns.disabled"),children:c.jsx(ce.Trigger,{asChild:!0,disabled:n,children:c.jsxs(ue,{size:"small",variant:"secondary",children:[w?c.jsx(ct,{}):c.jsx(ft,{}),m("dataGrid.columns.view")]})})}),c.jsx(ce.Content,{children:e.map((b,_)=>{const{checked:x,disabled:k,id:C,name:E}=b;return k?null:c.jsx(ce.CheckboxItem,{checked:x,onCheckedChange:t(_),onSelect:A=>A.preventDefault(),children:E},C)})})]}),w&&c.jsx(ue,{size:"small",variant:"transparent",type:"button",onClick:s,className:"text-ui-fg-muted hover:text-ui-fg-subtle","data-id":"reset-columns",children:m("dataGrid.columns.resetToDefault")})]}),c.jsxs("div",{className:"flex items-center gap-x-2",children:[l>0&&c.jsxs(ue,{size:"small",variant:"secondary",type:"button",onClick:i,className:se({"bg-ui-button-neutral-pressed":r}),children:[c.jsx(lt,{className:"text-ui-fg-subtle"}),c.jsx("span",{children:m("dataGrid.errors.count",{count:l})})]}),c.jsx(gs,{open:u,onOpenChange:p})]})]})},ws=({cell:e,columnIndex:n,rowIndex:t,anchor:s,onDragToFillStart:r})=>{const i=_t({row:t,col:n},s);return c.jsx("div",{role:"gridcell","aria-rowindex":t,"aria-colindex":n,style:{width:e.column.getSize(),...St(e.column)},"data-row-index":t,"data-column-index":n,className:se("relative flex items-center border-b border-r p-0 outline-none"),tabIndex:-1,children:c.jsxs("div",{className:"relative h-full w-full",children:[ot(e.column.columnDef.cell,{...e.getContext(),columnIndex:n,rowIndex:t}),i&&c.jsx("div",{onMouseDown:r,className:"bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize"})]})})},Cs=({row:e,rowIndex:n,virtualRow:t,virtualPaddingLeft:s,virtualPaddingRight:r,virtualColumns:l,flatColumns:i,anchor:o,onDragToFillStart:u})=>{const f=e.getVisibleCells();return c.jsxs("div",{role:"row","aria-rowindex":t.index,style:{transform:`translateY(${t.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:[s?c.jsx("div",{role:"presentation",style:{display:"flex",width:s}}):null,l.reduce((d,v,m,w)=>{const p=f[v.index],g=p.column,b=i.findIndex(x=>x.id===g.id),_=w[m-1];return _&&v.index!==_.index+1&&d.push(c.jsx("div",{role:"presentation",style:{display:"flex",width:`${v.start-_.end}px`}},`padding-${_.index}-${v.index}`)),d.push(c.jsx(ws,{cell:p,columnIndex:b,rowIndex:n,anchor:o,onDragToFillStart:u},p.id)),d},[]),r?c.jsx("div",{role:"presentation",style:{display:"flex",width:r}}):null]})},ys=({columns:e,rows:n=10})=>{const t=Array.from({length:n},(r,l)=>l),s=e.length;return c.jsxs("div",{className:"bg-ui-bg-subtle size-full",children:[c.jsx("div",{className:"bg-ui-bg-base border-b p-4",children:c.jsx("div",{className:"bg-ui-button-neutral h-7 w-[116px] animate-pulse rounded-md"})}),c.jsxs("div",{className:"bg-ui-bg-subtle size-full overflow-auto",children:[c.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((r,l)=>c.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:c.jsx(Ze,{className:"h-[14px] w-[164px]"})},l))}),c.jsx("div",{children:t.map((r,l)=>c.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((i,o)=>c.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:c.jsx(Ze,{className:"h-[14px] w-[164px]"})},o))},l))})]})]})},_s=({context:e})=>{const{field:n,control:t,renderProps:s}=ve({context:e}),r=oe({context:e}),{container:l,input:i}=s;return c.jsx(ge,{control:t,name:n,render:({field:o})=>c.jsx(xe,{...l,...r,children:c.jsx(js,{field:o,inputProps:i})})})},js=({field:e,inputProps:n})=>{const{onChange:t,onBlur:s,ref:r,value:l,...i}=e,{ref:o,onBlur:u,onChange:f,...d}=n,[v,m]=a.useState(l);a.useEffect(()=>{m(l)},[l]);const w=be(o,r);return c.jsx("input",{className:se("txt-compact-small text-ui-fg-subtle flex size-full cursor-pointer items-center justify-center bg-transparent outline-none","focus:cursor-text"),autoComplete:"off",tabIndex:-1,value:v,onChange:p=>m(p.target.value),ref:w,onBlur:()=>{s(),u(),f(v,l)},...d,...i})},Es=({isLoading:e,...n})=>{var t;return e?c.jsx(ys,{columns:n.columns,rows:(t=n.data)!=null&&t.length&&n.data.length>0?n.data.length:10}):c.jsx(vs,{...n})},zs=Object.assign(Es,{BooleanCell:cs,TextCell:_s,NumberCell:fs,CurrencyCell:De,ReadonlyCell:Oe});function Ms(){const e=an();return{column:({id:n,name:t,header:s,cell:r,disableHiding:l=!1,field:i,type:o})=>e.display({id:n,header:s,cell:r,enableHiding:!l,meta:{name:t,field:i,type:o}})}}var rt=({includesTax:e})=>{const{t:n}=le();return c.jsx(ze,{maxWidth:999,content:n(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:e?c.jsx(vt,{className:"text-ui-fg-muted shrink-0"}):c.jsx(pt,{className:"text-ui-fg-muted shrink-0"})})},Ns=({currencies:e,regions:n,pricePreferences:t,isReadyOnly:s,getFieldName:r,t:l})=>{const i=Ms();return[...(e==null?void 0:e.map(o=>{const u=t==null?void 0:t.find(d=>d.attribute==="currency_code"&&d.value===o),f=l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()});return i.column({id:`currency_prices.${o}`,name:l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()}),field:d=>(s==null?void 0:s(d))?null:r(d,o),type:"number",header:()=>c.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[c.jsx("span",{className:"truncate",title:f,children:f}),c.jsx(rt,{includesTax:u==null?void 0:u.is_tax_inclusive})]}),cell:d=>s!=null&&s(d)?c.jsx(Oe,{context:d}):c.jsx(De,{code:o,context:d})})}))??[],...(n==null?void 0:n.map(o=>{const u=t==null?void 0:t.find(d=>d.attribute==="region_id"&&d.value===o.id),f=l("fields.priceTemplate",{regionOrCurrency:o.name});return i.column({id:`region_prices.${o.id}`,name:l("fields.priceTemplate",{regionOrCurrency:o.name}),field:d=>(s==null?void 0:s(d))?null:r(d,o.id),type:"number",header:()=>c.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[c.jsx("span",{className:"truncate",title:f,children:f}),c.jsx(rt,{includesTax:u==null?void 0:u.is_tax_inclusive})]}),cell:d=>s!=null&&s(d)?c.jsx(Oe,{context:d}):(e==null?void 0:e.find(m=>m===o.currency_code))?c.jsx(De,{code:o.currency_code,context:d}):null})}))??[]]};export{zs as D,rt as I,Ms as a,ve as b,Ns as c,oe as d,xe as e,be as u};
